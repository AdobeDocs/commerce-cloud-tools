"use strict";(self.webpackChunkcommerce_cloud_tools=self.webpackChunkcommerce_cloud_tools||[]).push([[5641],{88086:function(e,a,n){n.r(a),n.d(a,{_frontmatter:function(){return i},default:function(){return u}});var o=n(87462),r=n(45987),m=(n(35776),n(3905)),t=n(91515);const d=["components"],i={},l=(p="InlineAlert",function(e){return console.warn("Component "+p+" was not imported, exported, or provided by MDXProvider as global scope"),(0,m.mdx)("div",e)});var p;const c={_frontmatter:i},s=t.Z;function u(e){let{components:a}=e,n=(0,r.Z)(e,d);return(0,m.mdx)(s,(0,o.Z)({},c,n,{components:a,mdxType:"MDXLayout"}),(0,m.mdx)("h1",{id:"configure-blackfire"},"Configure Blackfire"),(0,m.mdx)("p",null,"You can add Blackfire to your Cloud Docker for Commerce environment to fully automate performance testing."),(0,m.mdx)("p",null,"Blackfire.io for Adobe Commerce on cloud infrastructure is a PHP profiler and automated performance testing tool for use in development, integration, staging, and production environments. It enables you to locate and investigate performance issues in your environment at the code level and creates a performance profile by tracking every PHP call, method, and SQL query performed by your code."),(0,m.mdx)(l,{variant:"warning",slots:"text",mdxType:"InlineAlert"}),(0,m.mdx)("p",null,"You must have a Blackfire license and account to use Blackfire with Adobe Commerce on cloud infrastructure projects. See ",(0,m.mdx)("a",{parentName:"p",href:"https://docs.blackfire.io/integrations/paas/adobe-commerce-cloud"},"Adobe Commerce Cloud support")," or ",(0,m.mdx)("a",{parentName:"p",href:"https://blackfire.io/magento"},"Blackfire for Magento")," on the ",(0,m.mdx)("em",{parentName:"p"},"Blackfire.io website"),"."),(0,m.mdx)("p",null,(0,m.mdx)("strong",{parentName:"p"},"To add Blackfire.io to your project configuration"),":"),(0,m.mdx)("ol",null,(0,m.mdx)("li",{parentName:"ol"},(0,m.mdx)("p",{parentName:"li"},"Add the following Blackfire.io configuration to the ",(0,m.mdx)("inlineCode",{parentName:"p"},"runtime:extensions")," section of the ",(0,m.mdx)("inlineCode",{parentName:"p"},".magento.app.yaml")," file."),(0,m.mdx)("pre",{parentName:"li"},(0,m.mdx)("code",{parentName:"pre",className:"language-yaml"},"runtime:\n  extensions:\n    - random-extension-here\n    -\n      name: blackfire\n      configuration:\n        server_id: SERVER_ID\n        server_token: SERVER_TOKEN\n        client_id: CLIENT_ID\n        client_token: CLIENT_TOKEN\n"))),(0,m.mdx)("li",{parentName:"ol"},(0,m.mdx)("p",{parentName:"li"},"Generate the ",(0,m.mdx)("inlineCode",{parentName:"p"},"docker-compose.yml")," file for developer mode, adding any required ",(0,m.mdx)("a",{parentName:"p",href:"../quick-reference.md"},"build or service configuration options")," and ",(0,m.mdx)("a",{parentName:"p",href:"../setup/synchronize-data.md#file-synchronization-options"},"file synchronization options")," if needed."),(0,m.mdx)("pre",{parentName:"li"},(0,m.mdx)("code",{parentName:"pre",className:"language-bash"},'./vendor/bin/ece-docker build:compose --mode="developer"\n'))),(0,m.mdx)("li",{parentName:"ol"},(0,m.mdx)("p",{parentName:"li"},"Start the Cloud Docker for Commerce environment."),(0,m.mdx)("pre",{parentName:"li"},(0,m.mdx)("code",{parentName:"pre",className:"language-bash"},"./bin/magento-docker up\n")),(0,m.mdx)("pre",{parentName:"li"},(0,m.mdx)("code",{parentName:"pre",className:"language-bash"},"./bin/magento-docker ece-redeploy\n")),(0,m.mdx)("p",{parentName:"li"},"If you are using file synchronization, synchronize files as needed. See ",(0,m.mdx)("a",{parentName:"p",href:"../deploy/developer-mode.md"},"Launch Docker in developer mode"),".")),(0,m.mdx)("li",{parentName:"ol"},(0,m.mdx)("p",{parentName:"li"},"Add context to use locally customized PHP images as described in ",(0,m.mdx)("a",{parentName:"p",href:"../configure/extend-docker-configuration.md"},"Extend the Docker configuration"),".")),(0,m.mdx)("li",{parentName:"ol"},(0,m.mdx)("p",{parentName:"li"},"Install Adobe Commerce in your Docker environment."),(0,m.mdx)("ul",{parentName:"li"},(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("p",{parentName:"li"},"Deploy Adobe Commerce in the Docker container."),(0,m.mdx)("pre",{parentName:"li"},(0,m.mdx)("code",{parentName:"pre",className:"language-bash"},"docker compose run --rm deploy cloud-deploy\n")),(0,m.mdx)("pre",{parentName:"li"},(0,m.mdx)("code",{parentName:"pre",className:"language-bash"},"docker compose run --rm deploy magento-command deploy:mode:set developer\n"))),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("p",{parentName:"li"},"Run post-deploy hooks."),(0,m.mdx)("pre",{parentName:"li"},(0,m.mdx)("code",{parentName:"pre",className:"language-bash"},"docker compose run --rm deploy cloud-post-deploy\n")))),(0,m.mdx)("p",{parentName:"li"},"Review messages and notifications during the deployment process and address any errors or notifications as needed.")),(0,m.mdx)("li",{parentName:"ol"},(0,m.mdx)("p",{parentName:"li"},"Enable the Varnish cache for the Adobe Commerce application."),(0,m.mdx)("pre",{parentName:"li"},(0,m.mdx)("code",{parentName:"pre",className:"language-bash"},"docker compose run --rm deploy magento-command config:set system/full_page_cache/caching_application 2 --lock-env\n")),(0,m.mdx)("pre",{parentName:"li"},(0,m.mdx)("code",{parentName:"pre",className:"language-bash"},"docker compose run --rm deploy magento-command setup:config:set  --http-cache-hosts=varnish\n"))),(0,m.mdx)("li",{parentName:"ol"},(0,m.mdx)("p",{parentName:"li"},"Clear the cache."),(0,m.mdx)("pre",{parentName:"li"},(0,m.mdx)("code",{parentName:"pre",className:"language-bash"},"docker compose run --rm deploy magento-command cache:clean\n"))),(0,m.mdx)("li",{parentName:"ol"},(0,m.mdx)("p",{parentName:"li"},"Make sure that necessary containers are up and running."),(0,m.mdx)("pre",{parentName:"li"},(0,m.mdx)("code",{parentName:"pre",className:"language-bash"},"docker compose ps\n")))),(0,m.mdx)("p",null,(0,m.mdx)("strong",{parentName:"p"},"To use Blackfire.io for performance testing in Cloud Docker"),":"),(0,m.mdx)("ol",null,(0,m.mdx)("li",{parentName:"ol"},(0,m.mdx)("p",{parentName:"li"},"Install a profiling client as described in the ",(0,m.mdx)("a",{parentName:"p",href:"https://docs.blackfire.io/php/training-resources/book/04-first-profile"},"Blackfire documentation"),".")),(0,m.mdx)("li",{parentName:"ol"},(0,m.mdx)("p",{parentName:"li"},"Profile the Adobe Commerce website."))))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-docker-test-blackfire-md-7f418cc1705980b9550b.js.map