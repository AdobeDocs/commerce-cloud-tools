"use strict";(self.webpackChunkcommerce_cloud_tools=self.webpackChunkcommerce_cloud_tools||[]).push([[8528],{99070:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return l},default:function(){return x}});var a=n(87462),o=n(45987),d=(n(35776),n(3905)),m=n(91515);const r=["components"],l={},i=(p="InlineAlert",function(e){return console.warn("Component "+p+" was not imported, exported, or provided by MDXProvider as global scope"),(0,d.mdx)("div",e)});var p;const c={_frontmatter:l},s=m.Z;function x(e){let{components:t}=e,n=(0,o.Z)(e,r);return(0,d.mdx)(s,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,d.mdx)("h1",{id:"cloud-docker-quick-reference"},"Cloud Docker quick reference"),(0,d.mdx)("p",null,"A quick reference of common commands for Docker Compose and Cloud Docker for Commerce CLI."),(0,d.mdx)("h2",{id:"docker-compose"},"Docker Compose"),(0,d.mdx)("p",null,"Cloud Docker for Commerce uses the Docker Compose tool. The commands reflected in this guide are based on the latest usage defined in the ",(0,d.mdx)("a",{parentName:"p",href:"https://docs.docker.com/compose/reference/"},"docker compose CLI reference"),"."),(0,d.mdx)("p",null,"The following table lists the ",(0,d.mdx)("inlineCode",{parentName:"p"},"docker compose")," commands for building, deploying, and operating Cloud Docker for Commerce."),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:"left"},"Action"),(0,d.mdx)("th",{parentName:"tr",align:"left"},"Command"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:"left"},"Build and start Docker environment"),(0,d.mdx)("td",{parentName:"tr",align:"left"},(0,d.mdx)("inlineCode",{parentName:"td"},"docker compose up -d"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:"left"},"Build environment"),(0,d.mdx)("td",{parentName:"tr",align:"left"},(0,d.mdx)("inlineCode",{parentName:"td"},"docker compose run --rm build cloud-build"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:"left"},"Deploy environment"),(0,d.mdx)("td",{parentName:"tr",align:"left"},(0,d.mdx)("inlineCode",{parentName:"td"},"docker compose run --rm deploy cloud-deploy"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:"left"},"Run post-deploy hooks"),(0,d.mdx)("td",{parentName:"tr",align:"left"},(0,d.mdx)("inlineCode",{parentName:"td"},"docker compose run --rm deploy cloud-post-deploy"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:"left"},"Connect to CLI container"),(0,d.mdx)("td",{parentName:"tr",align:"left"},(0,d.mdx)("inlineCode",{parentName:"td"},"docker compose run --rm deploy bash"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:"left"},"Use ",(0,d.mdx)("inlineCode",{parentName:"td"},"ece-tools")," command"),(0,d.mdx)("td",{parentName:"tr",align:"left"},(0,d.mdx)("inlineCode",{parentName:"td"},"docker compose run --rm deploy ece-command <command>"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:"left"},"Use Magento command"),(0,d.mdx)("td",{parentName:"tr",align:"left"},(0,d.mdx)("inlineCode",{parentName:"td"},"docker compose run --rm deploy magento-command <command>"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:"left"},"Stop and remove Docker environment (removes volumes)"),(0,d.mdx)("td",{parentName:"tr",align:"left"},(0,d.mdx)("inlineCode",{parentName:"td"},"docker compose down -v"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:"left"},"Stop Docker environment without destroying containers"),(0,d.mdx)("td",{parentName:"tr",align:"left"},(0,d.mdx)("inlineCode",{parentName:"td"},"docker compose stop"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:"left"},"Resume Docker environment"),(0,d.mdx)("td",{parentName:"tr",align:"left"},(0,d.mdx)("inlineCode",{parentName:"td"},"docker compose start"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:"left"},"List images"),(0,d.mdx)("td",{parentName:"tr",align:"left"},(0,d.mdx)("inlineCode",{parentName:"td"},"docker compose images"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:"left"},"List containers and ports"),(0,d.mdx)("td",{parentName:"tr",align:"left"},(0,d.mdx)("inlineCode",{parentName:"td"},"docker compose ps")," or ",(0,d.mdx)("inlineCode",{parentName:"td"},"docker ps"))))),(0,d.mdx)(i,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,d.mdx)("p",null,"The ",(0,d.mdx)("inlineCode",{parentName:"p"},"--rm")," option automatically removes containers when they stop. This setting overrides any restart policy specified in the service configuration and prevents orphaned containers from consuming excess disk space. See ",(0,d.mdx)("a",{parentName:"p",href:"https://docs.docker.com/engine/reference/commandline/compose_run/"},(0,d.mdx)("inlineCode",{parentName:"a"},"docker composer run"))," in the ",(0,d.mdx)("em",{parentName:"p"},"Docker command-line reference"),"."),(0,d.mdx)("h2",{id:"configuration-generator"},"Configuration generator"),(0,d.mdx)("p",null,"Use the Cloud Docker for Commerce ",(0,d.mdx)("inlineCode",{parentName:"p"},".vendor/bin/ece-docker build:compose")," CLI commands to generate the Docker configuration files and build your environment."),(0,d.mdx)("p",null,"Use the following command to view the available build options:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-bash"},"php ./vendor/bin/ece-docker build:compose -h\n")),(0,d.mdx)(i,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,d.mdx)("p",null,"See ",(0,d.mdx)("a",{parentName:"p",href:"../docker/containers/index.md"},"Service versions")," for additional information about the service configuration options for the ",(0,d.mdx)("inlineCode",{parentName:"p"},"ece-docker build:compose")," command."),(0,d.mdx)("h3",{id:"override-configuration"},"Override configuration"),(0,d.mdx)("p",null,"Because the ",(0,d.mdx)("inlineCode",{parentName:"p"},"ece-docker build:compose")," command overwrites the base configuration, Adobe recommends saving your customizations in an override configuration file. You can use this method to merge multiple custom configurations. See ",(0,d.mdx)("a",{parentName:"p",href:"https://docs.docker.com/compose/extends/#multiple-compose-files"},"Docker Docs: Multiple Compose files"),"."),(0,d.mdx)("p",null,"The ",(0,d.mdx)("inlineCode",{parentName:"p"},"docker compose up")," command considers the base ",(0,d.mdx)("inlineCode",{parentName:"p"},"docker compose.yml")," configuration by default. If the ",(0,d.mdx)("inlineCode",{parentName:"p"},"docker compose.override.yml")," file is present, then the override configuration merges with the base configuration."),(0,d.mdx)("p",null,"Use the ",(0,d.mdx)("inlineCode",{parentName:"p"},"-f")," argument to specify an alternate configuration file. The following example uses the default configuration and merges each custom configuration sequentially:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-bash"},"docker compose -f docker compose.yml -f docker compose-custom.yml [-f more-custom-docker compose.yml] up\n")),(0,d.mdx)("h2",{id:"cloud-docker-cli"},"Cloud Docker CLI"),(0,d.mdx)("p",null,"Use the Cloud Docker for Commerce ",(0,d.mdx)("inlineCode",{parentName:"p"},"bin/magento-docker")," CLI commands to run ",(0,d.mdx)("inlineCode",{parentName:"p"},"docker compose")," tasks more efficiently. For example, instead of using a separate ",(0,d.mdx)("inlineCode",{parentName:"p"},"docker compose")," command for the build, deploy, and post-deploy tasks in the Docker environment, you can use the ",(0,d.mdx)("inlineCode",{parentName:"p"},"ece-redeploy")," command to complete all tasks."),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-bash"},"./bin/magento-docker ece-redeploy\n")),(0,d.mdx)("p",null,"Use the following to connect to the bash shell and begin using the Cloud Docker CLI:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-bash"},"./bin/magento-docker bash\n")),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:"left"},"Action"),(0,d.mdx)("th",{parentName:"tr",align:"left"},"Command"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:"left"},"Connect to bash shell"),(0,d.mdx)("td",{parentName:"tr",align:"left"},(0,d.mdx)("inlineCode",{parentName:"td"},"./bin/magento-docker bash"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:"left"},"Pull the latest images"),(0,d.mdx)("td",{parentName:"tr",align:"left"},(0,d.mdx)("inlineCode",{parentName:"td"},"./bin/magento-docker pull"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:"left"},"Build application"),(0,d.mdx)("td",{parentName:"tr",align:"left"},(0,d.mdx)("inlineCode",{parentName:"td"},"./bin/magento-docker ece-build"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:"left"},"Deploy application"),(0,d.mdx)("td",{parentName:"tr",align:"left"},(0,d.mdx)("inlineCode",{parentName:"td"},"./bin/magento-docker ece-deploy"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:"left"},"Run post-deploy hooks"),(0,d.mdx)("td",{parentName:"tr",align:"left"},(0,d.mdx)("inlineCode",{parentName:"td"},"./bin/magento-docker ece-post-deploy"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:"left"},"Re-build and redeploy application"),(0,d.mdx)("td",{parentName:"tr",align:"left"},(0,d.mdx)("inlineCode",{parentName:"td"},"./bin/magento-docker ece-redeploy"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:"left"},"Stop containers"),(0,d.mdx)("td",{parentName:"tr",align:"left"},(0,d.mdx)("inlineCode",{parentName:"td"},"./bin/magento-docker stop"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:"left"},"Start containers"),(0,d.mdx)("td",{parentName:"tr",align:"left"},(0,d.mdx)("inlineCode",{parentName:"td"},"./bin/magento-docker start"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:"left"},"Restart containers"),(0,d.mdx)("td",{parentName:"tr",align:"left"},(0,d.mdx)("inlineCode",{parentName:"td"},"./bin/magento-docker restart"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:"left"},"Destroy containers"),(0,d.mdx)("td",{parentName:"tr",align:"left"},(0,d.mdx)("inlineCode",{parentName:"td"},"./bin/magento-docker down"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:"left"},"Destroy, re-create, and start containers"),(0,d.mdx)("td",{parentName:"tr",align:"left"},(0,d.mdx)("inlineCode",{parentName:"td"},"./bin/magento-docker up"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:"left"},"Clears Redis cache"),(0,d.mdx)("td",{parentName:"tr",align:"left"},(0,d.mdx)("inlineCode",{parentName:"td"},"./bin/magento-docker flush-redis"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:"left"},"Clears Varnish cache"),(0,d.mdx)("td",{parentName:"tr",align:"left"},(0,d.mdx)("inlineCode",{parentName:"td"},"./bin/magento-docker flush-varnish"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:"left"},"Access database"),(0,d.mdx)("td",{parentName:"tr",align:"left"},(0,d.mdx)("inlineCode",{parentName:"td"},"./bin/magento-docker ece-db"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:"left"},"Run a command in a PHP container",(0,d.mdx)("br",null),"Supports the following values for the PHP version: 7.1, 7.2, 7.3, 7.4, 8.0"),(0,d.mdx)("td",{parentName:"tr",align:"left"},(0,d.mdx)("inlineCode",{parentName:"td"},"./bin/magento-docker php <version>"))))),(0,d.mdx)(i,{variant:"help",slots:"text1, text2",mdxType:"InlineAlert"}),(0,d.mdx)("p",null,"Use the following command to view the magento-docker CLI command help:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-bash"},"./bin/magento-docker -h\n")))}x.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-docker-quick-reference-md-195c88c69388a5941091.js.map