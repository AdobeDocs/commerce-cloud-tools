"use strict";(self.webpackChunkcommerce_cloud_tools=self.webpackChunkcommerce_cloud_tools||[]).push([[4862],{16111:function(e,n,o){o.r(n),o.d(n,{_frontmatter:function(){return l},default:function(){return u}});var t=o(87462),a=o(45987),r=(o(35776),o(3905)),m=o(91515);const i=["components"],l={},d=(p="InlineAlert",function(e){return console.warn("Component "+p+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.mdx)("div",e)});var p;const s={_frontmatter:l},c=m.Z;function u(e){let{components:n}=e,o=(0,a.Z)(e,i);return(0,r.mdx)(c,(0,t.Z)({},s,o,{components:n,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"initialize-cloud-docker"},"Initialize Cloud Docker"),(0,r.mdx)("p",null,"Cloud Docker for Commerce is one of the packages in the Cloud Suite for Commerce designed to deploy and manage local Adobe Commerce projects into Docker environments."),(0,r.mdx)(d,{variant:"success",slots:"text",mdxType:"InlineAlert"}),(0,r.mdx)("p",null,"Cloud Docker for Commerce supports the Adobe Commerce installation for both cloud and on-premises projects. The initialization steps are different for each project type."),(0,r.mdx)("h2",{id:"cloud-infrastructure-projects"},"Cloud infrastructure projects"),(0,r.mdx)("p",null,"Adobe Commerce on cloud infrastructure tooling contains the ",(0,r.mdx)("inlineCode",{parentName:"p"},"magento/magento-cloud-docker")," package, which is installed and updated automatically with the ",(0,r.mdx)("inlineCode",{parentName:"p"},"magento/ece-tools")," package."),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"To install an Adobe Commerce on cloud infrastructure project"),":"),(0,r.mdx)("ol",null,(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"Download an application template from the ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento-cloud"},"Cloud template repository"),". Be careful to select the branch that corresponds with the Commerce version.")),(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"Optionally, you can clone the latest template."),(0,r.mdx)("pre",{parentName:"li"},(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/magento/magento-cloud.git <install-directory-name>\n"))),(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"Change to the new project directory.")),(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"Add your ",(0,r.mdx)("a",{parentName:"p",href:"https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/prerequisites/authentication-keys.html"},"access credentials")," to the ",(0,r.mdx)("inlineCode",{parentName:"p"},"auth.json")," file."))),(0,r.mdx)("h2",{id:"on-premises-projects"},"On-premises projects"),(0,r.mdx)("p",null,"An on-premises installation requires the stand-alone ",(0,r.mdx)("inlineCode",{parentName:"p"},"magento/magento-cloud-docker")," package available in the ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento-cloud-docker"},"Cloud Docker GitHub repository"),". When you initialize an Adobe Commerce project for Docker development, you must create a ",(0,r.mdx)("a",{parentName:"p",href:"../configure/configuration-sources.md#unified-configuration"},".magento.docker.yml")," configuration source file to create the Docker containers for the local environment."),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"To install an Adobe Commerce on-premises project"),":"),(0,r.mdx)("ol",null,(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"Create a project using ",(0,r.mdx)("a",{parentName:"p",href:"https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/composer.html#prerequisites"},"Composer"),"."),(0,r.mdx)("pre",{parentName:"li"},(0,r.mdx)("code",{parentName:"pre",className:"language-bash"}," composer create-project --repository-url=https://repo.magento.com/ magento/project-enterprise-edition <install-directory-name>\n")),(0,r.mdx)("p",{parentName:"li"},"This command installs the latest release. To install a specific version, specify the version number, for example ",(0,r.mdx)("inlineCode",{parentName:"p"},"magento/project-enterprise-edition=2.4.6"),".")),(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"Change to the project directory.")),(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"Add the ece-tools and Cloud Docker for Commerce packages."),(0,r.mdx)("pre",{parentName:"li"},(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},"composer require --no-update --dev magento/ece-tools magento/magento-cloud-docker\n"))),(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"Create the default configuration source file—",(0,r.mdx)("a",{parentName:"p",href:"../configure/configuration-sources.md#unified-configuration"},".magento.docker.yml"),"—to build the Docker containers for the local environment."),(0,r.mdx)("pre",{parentName:"li"},(0,r.mdx)("code",{parentName:"pre",className:"language-yaml"},"name: magento\nsystem:\n    mode: 'production'\nservices:\n    php:\n        version: '8.2'\n        extensions:\n            enabled:\n                - xsl\n                - json\n                - redis\n    mysql:\n        version: '10.6'\n        image: 'mariadb'\n    redis:\n        version: '7.0'\n        image: 'redis'\n    opensearch:\n        version: '2.4'\n        image: 'magento/magento-cloud-docker-opensearch'\nhooks:\n    build: |\n        set -e\n        php ./vendor/bin/ece-tools run scenario/build/generate.xml\n        php ./vendor/bin/ece-tools run scenario/build/transfer.xml\n    deploy: 'php ./vendor/bin/ece-tools run scenario/deploy.xml'\n    post_deploy: 'php ./vendor/bin/ece-tools run scenario/post-deploy.xml'\nmounts:\n    var:\n        path: 'var'\n    app-etc:\n        path: 'app/etc'\n    pub-media:\n        path: 'pub/media'\n    pub-static:\n        path: 'pub/static'\n")))),(0,r.mdx)(d,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,r.mdx)("p",null,"This default configuration file provides the minimum configuration for the Docker environment. See ",(0,r.mdx)("a",{parentName:"p",href:"../configure/index.md"},"Configure the Docker environment"),"."),(0,r.mdx)("h2",{id:"update-the-hosts-file-and-install-dependencies"},"Update the hosts file and install dependencies"),(0,r.mdx)("p",null,"Before you use Cloud Docker for Commerce, you must update the ",(0,r.mdx)("inlineCode",{parentName:"p"},"etc/hosts")," file and install required dependencies. You can do this manually, or using an installation script."),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"To update and install manually"),":"),(0,r.mdx)("ol",null,(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"Add the default ",(0,r.mdx)("inlineCode",{parentName:"p"},"magento2.docker")," host to the hosts file to make Cloud Docker recognizable on the local machine."),(0,r.mdx)("pre",{parentName:"li"},(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},'echo "127.0.0.1 magento2.docker" | sudo tee -a /etc/hosts\n'))),(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"Update the project dependencies."),(0,r.mdx)("pre",{parentName:"li"},(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},"composer update\n")))),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"To update and install using the installation script"),":"),(0,r.mdx)("ol",null,(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"Install the template dependencies and add the default hostname to your ",(0,r.mdx)("inlineCode",{parentName:"p"},"/etc/hosts")," file."),(0,r.mdx)("pre",{parentName:"li"},(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},"curl -sL https://github.com/magento/magento-cloud-docker/releases/download/1.3.5/init-docker.sh | bash -s -- --php 8.2\n")),(0,r.mdx)("p",{parentName:"li"},"If necessary, you can add options to the ",(0,r.mdx)("inlineCode",{parentName:"p"},"init-docker.sh")," initialization script to customize your Docker environment. Run the following command to see the available options:"),(0,r.mdx)("pre",{parentName:"li"},(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},"curl -sL https://github.com/magento/magento-cloud-docker/releases/download/1.3.5/init-docker.sh | bash -s -- --help\n")))),(0,r.mdx)("p",null,"After you complete the installation, you can begin using the Docker environment."))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-docker-setup-initialize-docker-md-e7284a946186419ea32b.js.map